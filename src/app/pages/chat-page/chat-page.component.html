<div class="h-screen w-screen bg-gray-900 text-white flex flex-col font-sans">

  <app-header />

  <main class="flex-1 overflow-y-auto p-6 space-y-6">
    @for (msg of messages(); track msg.id) {
      <div class="w-full flex" [ngClass]="{'justify-end': msg.sender === 'user', 'justify-start': msg.sender === 'ai'}">
        <app-chat-message [message]="msg" />
      </div>
    }

    @if (isLoading()) {
      <div class="w-full flex justify-start">
        <div class="max-w-[90%]">
          <div class="bg-red-900/80 rounded-2xl p-3 flex items-center gap-2">
            <span class="w-2 h-2 bg-red-300 rounded-full animate-pulse delay-0"></span>
            <span class="w-2 h-2 bg-red-300 rounded-full animate-pulse delay-200"></span>
            <span class="w-2 h-2 bg-red-300 rounded-full animate-pulse delay-400"></span>
          </div>
        </div>
      </div>
    }
  </main>

  <app-chat-input (send)="handleSendMessage($event)" />

</div>
